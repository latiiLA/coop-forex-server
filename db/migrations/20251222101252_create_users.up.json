[
  {
    "create": "users",
    "validator": {
      "$jsonSchema": {
        "bsonType": "object",
        "required": ["role_id", "permissions", "profile_id", "username", "password", "status", "last_login", "created_by", "created_at", "updated_at", "is_deleted"],
        "properties": {
          "name": { "bsonType": "string" },
          "role_id": { "bsonType": "objectId" },
          "permissions": { 
            "bsonType": "array", 
            "items": { "bsonType": "string" }
            },
          "profile_id": { "bsonType": ["objectId"] },
          "username": { "bsonType": "string" },
          "password": { "bsonType": "string" },
          "status": { "bsonType": "string" },
          "last_login": { "bsonType": ["date", "null"] },
          "created_by": { "bsonType": "objectId" },
          "updated_by": { "bsonType": ["objectId"]},
          "deleted_by": { "bsonType": ["objectId"]},
          "deleted_at": { "bsonType": ["date"] },
          "created_at": { "bsonType": "date" },
          "updated_at": { "bsonType": "date" },
          "is_deleted": { "bsonType": "bool" }
        }
      }
    }
  },
  {
    "createIndexes": "users",
    "indexes": [
      { "key": { "username": 1 }, "name": "uniq_role_username", "unique": true }
    ]
  }
]
